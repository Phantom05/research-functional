<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>

  <!-- <script src="./main.js"></script> -->
  <script src="./_.js"></script>
  <script src="./partial.js"></script>
  <!-- <script>
    // 순수함수
    function add(a, b) {
      return a + b;
    }

    console.log(add(10, 5));
    console.log(add(10, 5));
    console.log(add(10, 5));
    console.log(add(10, 5));
    console.log(add(10, 10));

    // add2 는 부수효과를 가져옴.
    var c = 10;

    function add2(a, b) {
      return a + b + c;
    }
    console.log(
      add2(1, 1)
    );

    var cd = 20;

    function add3(a, b) {
      c = b;
      return a + b;
    }
    console.log(
      add3(20, 30)
    );

    var obj1 = {
      val: 10
    };

    function add4(obj, b) {
      obj.val += b;
    }
    add4(obj1, 20);
    console.log(obj1);

    // 참조만 할 뿐 값을 직접 변경하는 것은 없음.
    var obj1 = {
      val: 10
    };

    function add5(obj, b) {
      return {
        val: obj.val + b
      }
    }
    console.log(
      add5(obj1, 10)
    );
    console.log(obj1);
    console.clear();

    function add999(obj, b) {
      let new_obj = Object.assign({}, obj);
      new_obj.val += b
      return new_obj;
    }
    console.log(
      add999(obj1, 10)
    );
    console.log(obj1);

    // 싱글턴
    var Single = (function () {
      function Single() {

      }
      Single.__proto__.hello = function () {
        return 'world'
      }
      Single.__proto__.world = function () {
        return 'hello'
      }

      return Single
    })();

    console.dir(
      Single.world()
    );
    console.dir(Single);

    console.clear()

    // 일급 함수.
    var f1 = function (a) {
      return a * a
    }
    var f2 = add;
    // console.log(f2);

    function f3(f) {
      return f()
    }

    console.log(f3(function () {
      return 10
    }));
    console.log(f3(function () {
      return 20
    }));

    function add_maker(a) {
      return function (b) {
        return a + b;
      }
    }


    var add10 = add_maker(add(5, 5));
    var add15 = add_maker(15);
    console.log(
      add10(add(10, 10))
    );
    console.log(
      add15(10)
    );

    function f4(f1, f2, f3) {
      return f3(f1() + f2())
    }

    console.log(
      f4(
        () => 2,
        () => 5,
        a => a * a
      )
    );

    console.clear();

    var users = [{
        id: 1,
        name: "ID",
        age: 36
      },
      {
        id: 2,
        name: "BJ",
        age: 32
      },
      {
        id: 3,
        name: "JM",
        age: 32
      },
      {
        id: 4,
        name: "PJ",
        age: 27
      },
      {
        id: 5,
        name: "HA",
        age: 25
      },
      {
        id: 6,
        name: "JE",
        age: 26
      },
      {
        id: 7,
        name: "JI",
        age: 31
      },
      {
        id: 8,
        name: "MP",
        age: 23
      },
    ];

    var temp_users = [];
    temp_users = _filter(users, function (val) {
      return val.age >= 30
    });
    console.log(temp_users);

    var names = [];
    for (var i = 0; i < temp_users.length; i++) {
      names.push(temp_users[i].name);
    }
    console.log(names);

    var temp_users = [];
    temp_users = _filter(users, function (val) {
      return val.age < 30
    });
    console.log(temp_users);
    // console.log(
    //   _filter(users,function(val){return val.age >= 30})
    // );
    // console.log(
    //   _filter(users,function(val){return val.age < 30})
    // );
    // console.log(
    //   _map(users,function(val){return val.name})
    // );
    // console.log(
    //   _filter([1,2,3,4],function(val){return val >= 3})
    // );


    console.clear();

    var over_30 = _filter(users, function (val) {
      return val.age >= 30
    });
    var names = _map(over_30, function (val) {
      return val.name
    });

    console.log(names);
    var under_30 = _filter(users, function (val) {
      return val.age < 30
    });
    var age = _map(under_30, function (val) {
      return val.age
    });

    console.log(age);
    console.log(
      _map([1, 2, 3], function (num) {
        return num * 2
      })
    );
    console.clear();


    console.log(
      _map(
        _filter(users, function (users) {
          return users.age >= 30
        }),
        function (user) {
          return user.name
        }));

    console.log(
      _map(
        _filter(users, function (users) {
          return users.age < 30
        }),
        function (user) {
          return user.age
        }));


    console.log(
      [1, 2, 3].map(function (val) {
        return val * 2
      })
    );
    console.log(
      [1, 2, 3, 4].filter(function (val) {
        return val > 2
      })
    );


    console.log(
      _map(document.getElementsByTagName('*'), function (val) {
        return val.nodeName
      })
    );
    // 함수형에선 콜백함수의 이름이 중요함, 무조건 돌려주기만 하는 함수는 콜백
    // 조건이 들어가는 함수는 프리디케이트 함수
    // 반복문을 돌려주는 함수는 이터함수
    // 매핑을 해주는 함수는 mapper함수


    // var add =   _curry(add);
    // var add10 = add(10);
    // var add25 = add10(15);
    // console.log(add25);

    // var add = _curry(function(a,b){
    //   return a+b
    // });
    // var add10 = add(10);

    // console.log(
    //   add10(5)
    // );

    var c_add = _curry(function (a, b) {
      return a * 50 + b + 50
    });

    console.log(
      c_add(add(10, 10))(50)
    );

    var add10 = c_add(10);
    var add5 = c_add(5);
    console.log(
      add10(5)
    );
    console.log(
      add5(5)
    );


    console.log(
      c_add(10, 5)
    );
    console.clear();

    var addFn = _curry(function (a, b) {
      return a + b
    });

    var add10 = addFn(5);
    var add20 = add10(10);
    console.log(add20);

    console.log(
      addFn(10, 10)
    );

    var subFn = _curry(function (a, b) {
      return a - b;
    });
    console.log(
      subFn(10, 5)
    );
    var sub10 = subFn(10);
    console.log(
      sub10(5)
    );

    var sub = _curryr(function (a, b) {
      return a - b
    });
    var sub10 = sub(10);
    console.log(
      sub10(5)
    );

    console.clear();

    var user1 = users[0];
    console.log(
      _get('name')(user1)
    );

    var _get_name = _get('name');
    console.log(
      _get_name(users[1])
    );
    console.log(
      _get_name(users[2])
    );


    console.log(
      _map(
        _filter(users, function (users) {
          return users.age >= 30
        }),
        function (user) {
          return user.name
        }));


    console.log(
      _map(
        _filter(users, function (users) {
          return users.age >= 30
        }), _get('name')
      )
    );

    console.clear();

    console.log(
      _reduce([1, 2, 3, 4], add));


    var f1 = _pipe(
      function (a) {
        return a + 1;
      },
      function (a) {
        return a * 2
      },
      function (a) {
        return a * a
      }
    );


    console.log(
      f1(5)
    );


    _go(1,
      function (a) {
        return a + 1;
      },
      function (a) {
        return a * 2
      },
      function (a) {
        return a * a
      },
      console.log
    );

    _go(users,
      function (users) {
        return _filter(users, function (user) {
          return user.age < 30;
        })
      },
      function (users) {
        return _map(users, _get('name'))
      },
      console.log
    )

    var _map = _curryr(_map),
      _filter = _curryr(_filter);

    console.log(
      _map([1, 2, 3], function (val) {
        return val * 2
      }));

    console.log(
      _map(function (val) {
        return val * 2
      })([1, 2, 3])
    );

    console.clear();

    _go(users,
      _filter((user) => user.age >= 30),
      _map(_get('name')),
      console.log);

    _go(users,
      _filter((user) => user.age >= 30),
      _map(_get('age')),
      console.log);


    var a = _go(users,
      _filter(user=>user.age > 30)
    );
    console.log(a);

    var test = (a,b) =>({val:1});
    console.log(
      test()
    );
      
    _each(null,console.log);
    console.log(
      _filter(null,function(v){return v;})
    );

    _go([1,2,3,4],
    _filter(function(v){return v % 2;}),
      _map(function(v){return v * v;}),
      console.log
    );


    console.log(
      Object.keys({name:'ID',age:33})
    );

    _go([1,2,3,4],
    console.log);


    console.log(
      _keys(null)
    );
    console.log(
      _keys({valle:'worl'})
    );

    _each({
      13:"ID",
      19:"HD",
      29:"YD"
    },function(name){
      console.log(name);
    });

    console.log(
        _each({
        13:"ID",
        19:"HD",
        29:"YD"
      },function(name){
        return name.toLowerCase();
      })
    );

    _go({
      13:"ID",
      19:"HD",
      29:"YD"
    },
    _map(function(name){
      return name.toLowerCase()
    }),
    console.log
    );

    console.clear();
    _go({
      1:users[0],
      3:users[2],
      5:users[4],
    },
    _map(function(user){
      console.log(user);
      return user.name.toLowerCase();
    }),
    console.log
    )

    
    // 컬렉션 중심 프로그래밍
    console.log(
      _map(users,function(user){
        return user.name
      })
    );

    function _values(data){
      return _map(data,_identity)
    };

    console.log(
      _keys(users[0])
    );
    console.log(
      _values(users[0])
    );

    var a = 10;
    console.log(
      _identity(a)
    );

    console.log(
      _map(_identity)(users[0])
    );

    console.log(
      _pluck(users,'age')
    );
    console.log(
      _pluck(users,'name')
    );

    console.log(
      _reject(users,function(user){
        return user.age > 30
      })
    );

    console.log(
      _compact([1,2,0,false,null,{}])
    );




   _go({
      13:"ID",
      19:"HD",
      29:"YD"
    },
    _filter(name=>name === 'HD'),
    _map(item=>item+' WORLD'),
    console.log);


    console.log(
      _find_index(users,function(user){
      return user.id == 3
    })
    );

    console.log(
    _get(_find(users,function(user){
      return user.name == 'BJ'
    }),'name')
   );

   _go(users,
    _find(function(user){return user.id == 5}),
    _get('age'),
    console.log);

  console.log(
    _some([null,false,0])
  );
  console.log(
    _every([1,2,5,10,20])
  );
  console.log(
    _every([1,2,5,10,false])
  );
    
  console.log(
    _some(users,function(user){
      return user.age > 20;
    })
  )
    
  console.log(
    _min([5,1,2,4,10,5,-4])
  );
  console.log(
    _max([5,1,2,4,10,5,-4])
  );

  console.log(
    _min_by([1,2,4,10,5,-4],Math.abs)
  );

  console.log(
    _max_by([1,2,4,10,5,-4],Math.abs)
  );


  function form(...elm){
    const form  = elt("form",{action:"/ab"});
    form.append(...elm);
    return form
  } 

  const Form  =_curry(form);
  console.log(
    Form(
      elt("input",{type:"text"}),
      // elt("input",{type:"text"}),
      elt("button",{type:'submit'}),
    )
  );



  var _min_by = _curryr(_min_by);
  var _max_by = _curryr(_max_by);

  console.log(
    _min_by(users,function(user){
      return user.age;
    })
  );

  _go(users,
    _filter(user=>user.age>=30),
    _min_by(function(user){
      return user.age
    }),
    console.log);

  _go(users,
    _reject(user=>user.age >= 30),
    _max_by(_get('age')),
    console.log
  )


  console.log(_map);
  </script> -->

  <script>
    var users = [{
        id: 1,
        name: "ID",
        age: 36
      },
      {
        id: 2,
        name: "BJ",
        age: 32
      },
      {
        id: 3,
        name: "JM",
        age: 32
      },
      {
        id: 4,
        name: "PJ",
        age: 27
      },
      {
        id: 5,
        name: "HA",
        age: 25
      },
      {
        id: 6,
        name: "JE",
        age: 26
      },
      {
        id: 7,
        name: "JI",
        age: 31
      },
      {
        id: 8,
        name: "MP",
        age: 23
      },
    ];

    _.go(users,
      _.map(user => ({...user,age:user.age+10})),
      _.filter(user=> user.age >= 30),
      _.pipe(
        _.map(user=>({...user,age:user.age+20})),
        _.filter(user => user.age <=60)
      ),
      console.log);

 


    _go(users,
      _filter(user=>user.age >=30),
      _min_by(_get('age')),
      console.log);
    
    
    console.clear()
    _go(users,
      _group_by(function(user){
          return user.age;
      }),
      console.log)

    _go(users,
      _group_by(function(user){
          return user.age - user.age % 10;
      }),
      console.log);


    _go(users,
      _group_by(function(user){
          return user.name[0]
      }),
      console.log)

    _go(users,
      _group_by(_pipe(_get('name'),_head)),
      
      console.log);

    

      console.log(
        _count_by(users,function(user){
          return user.age - user.age % 10;
        })
      );


      

      // _map(users,function(val,key){
      //     console.log(key);
      // });


      console.log(
        _pairs(users[0])
      );


  </script>
</body>

</html>